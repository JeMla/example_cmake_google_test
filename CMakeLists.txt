cmake_minimum_required (VERSION 2.6)
project (fact_codinggame)
set (fact_VERSION_MAJOR 1)
set (fact_VERSION_MINOR 0)

enable_testing()
add_definitions(-Wall -g)

set(bench_output_dir benchResults)
file(MAKE_DIRECTORY ${bench_output_dir})

add_executable(fact main/main.c lib/fact.c)
target_compile_options(fact PUBLIC -O3)

add_executable(factDebug main/main.c lib/fact.c)
target_compile_options(factDebug PUBLIC -g)

add_executable(factUtests tests/factGoogleTests.cpp lib/fact.c)
target_compile_options(factDebug PUBLIC -DDO_TESTS)
target_link_libraries(factUtests gtest pthread)

add_executable(factBenchs lib/fact.c tests/factGoogleBenchmark.cpp)
target_compile_options(factBenchs PUBLIC -DDO_TESTS)
target_link_libraries(factBenchs benchmark pthread)

add_test(UT_one factUtests --gtest_filter=one)
add_test(UT_two factUtests --gtest_filter=two)
add_test(UT_three factUtests --gtest_filter=three)
add_test(UT_four factUtests --gtest_filter=four)
add_test(UT_five factUtests --gtest_filter=five)
add_test(UT_six factUtests --gtest_filter=six)
add_test(UT_seven factUtests --gtest_filter=seven)
add_test(UT_eight factUtests --gtest_filter=eight)
add_test(UT_nine factUtests --gtest_filter=nine)
add_test(UT_ten factUtests --gtest_filter=ten)
add_test(UT_eleven factUtests --gtest_filter=eleven)
add_test(UT_twelve factUtests --gtest_filter=twelve)
add_test(UT_thirteen factUtests --gtest_filter=thirteen)
add_test(UT_fourteen factUtests --gtest_filter=fourteen)
add_test(UT_fifteen factUtests --gtest_filter=fifteen)
add_test(UT_sixteen factUtests --gtest_filter=sixteen)
add_test(UT_seventeen factUtests --gtest_filter=seventeen)
add_test(UT_eighteen factUtests --gtest_filter=eighteen)
add_test(UT_nineteen factUtests --gtest_filter=nineteen)
add_test(UT_twenty factUtests --gtest_filter=twenty)

add_test(BM_one factBenchs --benchmark_filter=one --benchmark_format=csv --benchmark_out=./benchResults/one.csv)
add_test(BM_two factBenchs --benchmark_filter=two --benchmark_format=csv --benchmark_out=./benchResults/two.csv)
add_test(BM_three factBenchs --benchmark_filter=three --benchmark_format=csv --benchmark_out=./benchResults/three.csv)
add_test(BM_four factBenchs --benchmark_filter=four --benchmark_format=csv --benchmark_out=./benchResults/four.csv)
add_test(BM_five factBenchs --benchmark_filter=five --benchmark_format=csv --benchmark_out=./benchResults/five.csv)
add_test(BM_six factBenchs --benchmark_filter=six --benchmark_format=csv --benchmark_out=./benchResults/six.csv)
add_test(BM_seven factBenchs --benchmark_filter=seven --benchmark_format=csv --benchmark_out=./benchResults/seven.csv)
add_test(BM_eight factBenchs --benchmark_filter=eight --benchmark_format=csv --benchmark_out=./benchResults/eight.csv)
add_test(BM_nine factBenchs --benchmark_filter=nine --benchmark_format=csv --benchmark_out=./benchResults/nine.csv)
add_test(BM_ten factBenchs --benchmark_filter=ten --benchmark_format=csv --benchmark_out=./benchResults/ten.csv)
add_test(BM_eleven factBenchs --benchmark_filter=eleven --benchmark_format=csv --benchmark_out=./benchResults/eleven.csv)
add_test(BM_twelve factBenchs --benchmark_filter=twelve --benchmark_format=csv --benchmark_out=./benchResults/twelve.csv)
add_test(BM_thirteen factBenchs --benchmark_filter=thirteen --benchmark_format=csv --benchmark_out=./benchResults/thirteen.csv)
add_test(BM_fourteen factBenchs --benchmark_filter=fourteen --benchmark_format=csv --benchmark_out=./benchResults/fourteen.csv)
add_test(BM_fifteen factBenchs --benchmark_filter=fifteen --benchmark_format=csv --benchmark_out=./benchResults/fifteen.csv)
add_test(BM_sixteen factBenchs --benchmark_filter=sixteen --benchmark_format=csv --benchmark_out=./benchResults/sixteen.csv)
add_test(BM_seventeen factBenchs --benchmark_filter=seventeen --benchmark_format=csv --benchmark_out=./benchResults/seventeen.csv)
add_test(BM_eighteen factBenchs --benchmark_filter=eighteen --benchmark_format=csv --benchmark_out=./benchResults/eighteen.csv)
add_test(BM_nineteen factBenchs --benchmark_filter=nineteen --benchmark_format=csv --benchmark_out=./benchResults/nineteen.csv)
add_test(BM_twenty factBenchs --benchmark_filter=twenty --benchmark_format=csv --benchmark_out=./benchResults/twenty.csv)


